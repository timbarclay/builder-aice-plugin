{"version":3,"file":"plugin-ai-generator.system.js","sources":["../src/GeneratorForm.tsx","../src/Preview.tsx","../src/api/aiceApi.ts","../src/api/resultBucketApi.ts","../src/GeneratorPane.tsx","../src/AiGenerator.tsx"],"sourcesContent":["/** @jsx jsx */\nimport React, { useState } from 'react';\nimport { jsx } from '@emotion/core';\nimport { TextField, Typography, Paper, Button } from '@material-ui/core';\nimport { toJS } from 'mobx';\nimport { EngineParameters } from './GeneratorPane';\n\ninterface GeneratorFormProps {\n  lessonData: Map<string, any>;\n  disabled: boolean;\n  onGenerate: (parameters: EngineParameters) => void;\n}\n\nexport default function GeneratorForm({ lessonData, disabled, onGenerate }: GeneratorFormProps) {\n  const [title, setTitle] = useState(lessonData.get('name') || '');\n  const [learningObjective, setLearningObjective] = useState(lessonData.get('skill')?.value.data.learningObjective || '');\n  const [learningGoal, setLearningGoal] = useState(lessonData.get('skill')?.value.data.learningGoal || '');\n  const [targetWordCount, setTargetWordCount] = useState(300);\n  const [vocabularyWords, setVocabularyWords] = useState(\n    toJS(lessonData.get('vocabularyWords'))?.map((w: any) => w?.word?.Default).join(', ') || ''\n  );\n\n  const handleGenerate = () => {\n    onGenerate({\n      title,\n      learningObjective,\n      learningGoal,\n      targetWordCount,\n      vocabularyWords: vocabularyWords.split(',').map((w: string) => w.trim()).filter((w: string) => w),\n    })\n  };\n\n  return (\n    <Paper css={{ padding: 24, height: '100%' }}>\n      <Typography variant=\"h6\" css={{ marginBottom: 16 }}>\n        Content Generation Settings\n      </Typography>\n      \n      <div css={{ marginBottom: 16 }}>\n        <TextField\n          label=\"Title\"\n          fullWidth\n          variant=\"outlined\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n      </div>\n      \n      <div css={{ marginBottom: 16 }}>\n        <TextField\n          label=\"Learning Objective\"\n          fullWidth\n          multiline\n          rows={2}\n          variant=\"outlined\"\n          value={learningObjective}\n          onChange={(e) => setLearningObjective(e.target.value)}\n        />\n      </div>\n      \n      <div css={{ marginBottom: 16 }}>\n        <TextField\n          label=\"Learning Goal\"\n          fullWidth\n          multiline\n          rows={2}\n          variant=\"outlined\"\n          value={learningGoal}\n          onChange={(e) => setLearningGoal(e.target.value)}\n        />\n      </div>\n      \n      <div css={{ marginBottom: 16 }}>\n        <TextField\n          label=\"Target Word Count\"\n          fullWidth\n          type=\"number\"\n          variant=\"outlined\"\n          value={targetWordCount}\n          onChange={(e) => setTargetWordCount(parseInt(e.target.value) || 300)}\n        />\n      </div>\n      \n      <div css={{ marginBottom: 24 }}>\n        <TextField\n          label=\"Vocabulary Words\"\n          fullWidth\n          multiline\n          rows={3}\n          variant=\"outlined\"\n          placeholder=\"Enter words separated by commas\"\n          value={vocabularyWords}\n          onChange={(e) => setVocabularyWords(e.target.value)}\n          helperText=\"Separate multiple words with commas\"\n        />\n      </div>\n      \n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        fullWidth\n        size=\"large\"\n        onClick={handleGenerate}\n        disabled={disabled}\n      >\n        Generate Content\n      </Button>\n    </Paper>\n  );\n}","/** @jsx jsx */\nimport React from 'react';\nimport { jsx } from '@emotion/core';\nimport { Typography, Paper, Divider } from '@material-ui/core';\n\ninterface PreviewProps {\n  content?: {\n    body: string\n    questions: Array<{\n      question: string\n      answer: string\n    }>\n  }\n}\n\nexport default function Preview({ content }: PreviewProps) {\n  if (!content) {\n    return <div>Preview</div>\n  }\n\n  return (\n    <Paper css={{ padding: 24, height: '100%', overflow: 'auto' }}>\n      <Typography variant=\"h6\" css={{ marginBottom: 16 }}>\n        Generated Content\n      </Typography>\n      \n      <div css={{ marginBottom: 24 }}>\n        <Typography variant=\"subtitle2\" css={{ marginBottom: 8, fontWeight: 'bold' }}>\n          Article:\n        </Typography>\n        <Typography variant=\"body2\" css={{ whiteSpace: 'pre-wrap', lineHeight: 1.6 }}>\n          {content.body}\n        </Typography>\n      </div>\n      \n      <Divider css={{ marginBottom: 16 }} />\n      \n      <Typography variant=\"subtitle2\" css={{ marginBottom: 12, fontWeight: 'bold' }}>\n        Comprehension Questions:\n      </Typography>\n      \n      {content.questions.map((q, index) => (\n        <div key={index} css={{ marginBottom: 12 }}>\n          <Typography variant=\"body2\" css={{ fontWeight: 500 }}>\n            {index + 1}. {q.question}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" css={{ marginLeft: 16 }}>\n            Answer: {q.answer}\n          </Typography>\n        </div>\n      ))}\n    </Paper>\n  )\n}","interface AuthResponse {\n  access_token: string\n  expires_in: number\n  token_type: string\n}\n\nexport interface GenerateArticleResponse {\n  generation_id: string\n}\n\nexport interface GenerationStatusResponse {\n  generation_id: string\n  generation_status: string\n  output_location: string | null\n}\n\nconst AUTH_URL = 'https://ice-auth-dev.auth.us-east-1.amazoncognito.com/oauth2/token'\nconst AI_URL = 'https://06vso1ffs3.execute-api.us-east-1.amazonaws.com/dev'\n\nexport class AiceApi {\n  private clientId: string\n  private clientSecret: string\n  private accessToken: string | undefined\n  private accessTokenExpiration: Date | undefined\n\n  constructor(clientId: string, clientSecret: string) {\n    this.clientId = clientId\n    this.clientSecret = clientSecret\n  }\n\n  generateArticle(\n    title: string,\n    learningObjectives: string,\n    learningGoal: string,\n    length: number,\n    vocabularyList: string[],\n  ): Promise<GenerateArticleResponse> {\n    return this.callApi('/generate/article', {\n      title,\n      learning_objectives: [learningObjectives],\n      learning_goal: [learningGoal],\n      word_count: length,\n      vocabulary_list: vocabularyList,\n      generate_images: false,\n    })\n  }\n\n  generationStatus(generationId: string): Promise<GenerationStatusResponse> {\n    return this.callApi(`/status`, {\n      generation_id: generationId,\n    })\n  }\n\n  private async callApi(path: string, body: any) {\n    if (!this.accessToken || this.isTokenExpired()) {\n      await this.auth()\n    }\n\n    const response = await fetch(`${AI_URL}${path}`, {\n      method: 'POST',\n      body: JSON.stringify(body),\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.accessToken}`,\n      },\n    })\n\n    if (response.status === 401 || response.status === 403) {\n      this.accessToken = undefined\n      this.accessTokenExpiration = undefined\n    }\n\n    return response.json()\n  }\n\n  private async auth() {\n    const response = await fetch(AUTH_URL, {\n      method: 'POST',\n      body: new URLSearchParams({\n        grant_type: 'client_credentials',\n        client_id: this.clientId,\n        client_secret: this.clientSecret,\n        scope: 'ice-m2m-resource-server-dev/read',\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    })\n\n    const data: AuthResponse = await response.json()\n    this.accessToken = data.access_token\n    this.accessTokenExpiration = new Date(Date.now() + data.expires_in * 1000)\n  }\n\n  private isTokenExpired() {\n    return this.accessTokenExpiration && this.accessTokenExpiration < new Date()\n  }\n}\n\nconst mockStatus = {\n  generation_id:\n    'arn:aws:states:us-east-1:373983736669:execution:ice-sfn-article-dev:66bfdb3d-c647-4cbc-9178-f0044348901c',\n  generation_status: 'COMPLETED',\n  submitted_at: '2025-05-20T13:54:59.648Z',\n  output_location:\n    's3://ai-ice-generation-dev/generate/article/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-article-dev:66bfdb3d-c647-4cbc-9178-f0044348901c/output.json',\n  completed_at: '2025-05-20T13:59:06.117Z',\n  evaluation_data: {\n    objective_metrics: [\n      {\n        name: 'aoa_mean',\n        value: 5.387311178247733,\n        within_threshold: null,\n        config: {\n          name: 'aoa_mean',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n      {\n        name: 'aoa_median',\n        value: 5.22,\n        within_threshold: null,\n        config: {\n          name: 'aoa_median',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n      {\n        name: 'aoa_std',\n        value: 1.3763047880252888,\n        within_threshold: null,\n        config: {\n          name: 'aoa_std',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n      {\n        name: 'flesch_score',\n        value: 75.91,\n        within_threshold: false,\n        config: {\n          name: 'flesch_score',\n          enabled: true,\n          lower: 80,\n          higher: 100,\n        },\n      },\n      {\n        name: 'num_bullet_points',\n        value: 0,\n        within_threshold: null,\n        config: {\n          name: 'num_bullet_points',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n      {\n        name: 'num_words',\n        value: 332,\n        within_threshold: true,\n        config: {\n          name: 'num_words',\n          enabled: true,\n          lower: 250,\n          higher: 350,\n        },\n      },\n      {\n        name: 'num_paragraphs',\n        value: 7,\n        within_threshold: null,\n        config: {\n          name: 'num_paragraphs',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n      {\n        name: 'num_characters',\n        value: 1888,\n        within_threshold: null,\n        config: {\n          name: 'num_characters',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n      {\n        name: 'num_characters_question_1',\n        value: 70,\n        within_threshold: true,\n        config: {\n          name: 'num_characters_questions',\n          enabled: true,\n          lower: 20,\n          higher: 80,\n        },\n      },\n      {\n        name: 'num_characters_question_2',\n        value: 69,\n        within_threshold: true,\n        config: {\n          name: 'num_characters_questions',\n          enabled: true,\n          lower: 20,\n          higher: 80,\n        },\n      },\n      {\n        name: 'num_characters_question_3',\n        value: 65,\n        within_threshold: true,\n        config: {\n          name: 'num_characters_questions',\n          enabled: true,\n          lower: 20,\n          higher: 80,\n        },\n      },\n      {\n        name: 'num_characters_question_4',\n        value: 61,\n        within_threshold: true,\n        config: {\n          name: 'num_characters_questions',\n          enabled: true,\n          lower: 20,\n          higher: 80,\n        },\n      },\n      {\n        name: 'num_characters_question_5',\n        value: 63,\n        within_threshold: true,\n        config: {\n          name: 'num_characters_questions',\n          enabled: true,\n          lower: 20,\n          higher: 80,\n        },\n      },\n      {\n        name: 'words_presence_percentage',\n        value: 100,\n        within_threshold: true,\n        config: {\n          name: 'words_presence_percentage',\n          enabled: true,\n          lower: 100,\n          higher: 100,\n        },\n      },\n      {\n        name: 'num_words_found',\n        value: 5,\n        within_threshold: null,\n        config: {\n          name: 'num_words_found',\n          enabled: true,\n          lower: null,\n          higher: null,\n        },\n      },\n    ],\n    subjective_metrics: [\n      {\n        name: 'Alignment with Objective',\n        value: true,\n        explanation:\n          \"The article 'Who Are School Leaders?' fulfills the learning objective of 'Read an article to gain information.' The text provides clear, age-appropriate information about different school leaders (principals, teachers, counselors, nurses, and librarians) and their roles within a school. The article is structured to deliver factual content about each leader's responsibilities and how they contribute to the school environment, allowing readers to gain new information through reading.\",\n        passed_review: true,\n        config: {\n          name: 'Alignment with Objective',\n          enabled: true,\n          prompt: 'article_alignment_with_objectives',\n          human_prompt: 'Does the article align with the learning objective?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Alignment with Learning Goal',\n        value: true,\n        explanation:\n          \"The article successfully fulfills the learning goal 'I can remember a school leader and how they help at school.' It clearly identifies multiple school leaders (principal, teachers, counselor, nurse, and librarian) and provides specific details about how each one helps at school. For each leader, the article explains their roles, responsibilities, and how they contribute to making the school function well. The content is presented in an age-appropriate way that would help students remember these leaders and their functions.\",\n        passed_review: true,\n        config: {\n          name: 'Alignment with Learning Goal',\n          enabled: true,\n          prompt: 'article_alignment_with_goals',\n          human_prompt: 'Does the article match the learning goal?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Comprehension Questions Accuracy',\n        value: true,\n        explanation:\n          \"All five comprehension questions can be answered directly from the article content. Question 1 can be answered with 'principal' from paragraph 2. Question 2 can be answered with 'teacher' from paragraph 3. Question 3 can be answered with 'school' from paragraph 1. Question 4 can be answered with 'fair' from paragraph 2. Question 5 can be answered with 'help' which appears in paragraphs about both the counselor and nurse.\",\n        passed_review: true,\n        config: {\n          name: 'Comprehension Questions Accuracy',\n          enabled: true,\n          prompt: 'article_comprehension_question_accuracy',\n          human_prompt:\n            'Can the comprehension questions be answered using the article, either directly or through inference?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Answer Accuracy',\n        value: true,\n        explanation:\n          \"All the provided answers can be directly found in the article text. 1) 'The principal makes sure everyone follows the rules and stays safe.' 2) 'A teacher helps students learn new things every day in class.' 3) 'School leaders are people who help make our school a good place to learn.' 4) 'When there is a problem between students, the principal helps make things fair for everyone.' 5) While not stated in exactly these words, the article clearly indicates that both the counselor ('helps when you feel sad or worried' and 'help students who need extra support') and the nurse ('helps when students don't feel well') provide help to students who need support.\",\n        passed_review: true,\n        config: {\n          name: 'Answer Accuracy',\n          enabled: true,\n          prompt: 'article_comprehension_answer_accuracy',\n          human_prompt: 'Are the provided answers accurate?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Clarity & Directness',\n        value: true,\n        explanation:\n          \"The article uses clear, direct language appropriate for young readers. It explains the roles of school leaders (principal, teachers, counselor, nurse, librarian) in simple terms without unnecessary complexity. Each paragraph focuses on one type of leader with concrete examples of their responsibilities. The text maintains accuracy while using straightforward vocabulary and short sentences. Complex concepts like leadership are broken down into tangible actions that students can understand (e.g., 'The principal makes sure everyone follows the rules and stays safe'). The article avoids jargon and presents information in a logical, accessible manner.\",\n        passed_review: true,\n        config: {\n          name: 'Clarity & Directness',\n          enabled: true,\n          prompt: 'article_clarity_and_directness',\n          human_prompt: 'Is the language used in the article clear and direct?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Figurative Language Usage',\n        value: false,\n        explanation:\n          \"The article 'Who Are School Leaders?' does not contain figurative language such as metaphors, similes, or idioms. The text is written in straightforward, literal language that directly explains the roles of various school leaders (principals, teachers, counselors, nurses, and librarians). The language is simple, concrete, and descriptive, making it appropriate for young readers. The author uses clear statements about what each school leader does rather than comparing them to other things (similes/metaphors) or using idiomatic expressions that might require interpretation. This literal approach enhances comprehension for the intended audience by presenting information in a direct, accessible manner.\",\n        passed_review: null,\n        config: {\n          name: 'Figurative Language Usage',\n          enabled: true,\n          prompt: 'article_figurative_langage',\n          human_prompt:\n            'Does the article contain figurative language (e.g., metaphors, similes, idioms)? If so, does it enhance or hinder comprehension?',\n          review_check: false,\n        },\n      },\n      {\n        name: 'Bias & Objectivity',\n        value: true,\n        explanation:\n          'The article presents factual information about different school leadership roles without expressing personal opinions as facts or showing bias. It describes the roles and responsibilities of principals, teachers, counselors, nurses, and librarians in objective terms, focusing on their functions within the school environment. The language is straightforward and educational, appropriate for young readers, and does not advocate for any particular political, social, or ideological position. The article maintains a neutral, informative tone throughout and presents the roles of school leaders in a balanced way.',\n        passed_review: true,\n        config: {\n          name: 'Bias & Objectivity',\n          enabled: true,\n          prompt: 'article_bias_and_objectivity',\n          human_prompt: 'Does the article avoid biases and refrain from stating opinions as facts?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Duplicate Content',\n        value: true,\n        explanation:\n          \"The article 'Who Are School Leaders?' avoids unnecessary duplication of words, sentences, and ideas. Each paragraph introduces a different school leader (principal, teachers, counselor, nurse, librarian) with distinct responsibilities and contributions. While there are some repeated phrases like 'school leader' and 'help students,' these repetitions are appropriate for maintaining the article's focus and cohesion. Each section adds unique value by explaining different leadership roles within a school setting. The language is clear and appropriately simplified for young readers without redundant content.\",\n        passed_review: null,\n        config: {\n          name: 'Duplicate Content',\n          enabled: true,\n          prompt: 'article_duplicate_content',\n          human_prompt: 'Does the text avoid duplicate words, sentences, or ideas?',\n          review_check: false,\n        },\n      },\n      {\n        name: 'Engagement & Hook',\n        value: false,\n        explanation:\n          \"While the article is clear and informative, it lacks a strong hook at the beginning to immediately capture the reader's attention. The opening simply states a definition of school leaders in straightforward language ('School leaders are people who help make our school a good place to learn'). The article maintains a simple, informative tone throughout but doesn't employ engaging techniques like questions, surprising facts, personal stories, or vivid scenarios that would make it particularly captivating. The content is organized well with clear explanations of different leadership roles, but it doesn't use literary devices, varied sentence structures, or compelling language that would elevate it to being truly engaging for readers.\",\n        passed_review: null,\n        config: {\n          name: 'Engagement & Hook',\n          enabled: true,\n          prompt: 'article_engagement_and_hook',\n          human_prompt:\n            'Is the article presented in an engaging way, including a strong hook at the beginning?',\n          review_check: false,\n        },\n      },\n      {\n        name: 'Diverse Experiences',\n        value: false,\n        explanation:\n          \"The article about school leaders does not adequately include diverse perspectives and experiences. While it covers different roles within a school (principal, teachers, counselor, nurse, librarian), it presents a generic, one-size-fits-all description that lacks cultural diversity or varied experiences. There are no examples of school leaders from different backgrounds, cultures, or communities. The article doesn't acknowledge how school leadership might vary across different types of schools (urban, rural, international, etc.) or how students from various backgrounds might interact differently with these leaders. It also doesn't include perspectives from different family structures, socioeconomic backgrounds, or cultural contexts that would help all students see themselves reflected in the material. To be more inclusive, the article should incorporate diverse names, scenarios, and cultural references that represent the varied experiences of students.\",\n        passed_review: null,\n        config: {\n          name: 'Diverse Experiences',\n          enabled: true,\n          prompt: 'article_diverse_experiences',\n          human_prompt:\n            'Does the text include diverse experiences so that all students can relate to the material?',\n          review_check: false,\n        },\n      },\n      {\n        name: 'Paragraph Structure',\n        value: true,\n        explanation:\n          \"Each paragraph in the article presents a clear, focused idea and remains self-contained. The first paragraph introduces the concept of school leaders. The subsequent paragraphs each focus on a specific school leader role (principal, teachers, counselor, nurse, librarian) with clear descriptions of their responsibilities. Each paragraph maintains internal coherence by staying focused on its specific topic, providing relevant details about the leader's role, and contributing to the overall theme of school leadership. The final paragraph effectively concludes by emphasizing how all school leaders work together. The paragraphs follow a logical structure, with appropriate transitions, and each one could stand alone as a complete thought while still connecting to the article's main topic.\",\n        passed_review: true,\n        config: {\n          name: 'Paragraph Structure',\n          enabled: true,\n          prompt: 'article_paragraph_structure',\n          human_prompt: 'Does each paragraph present a clear idea and remain self-contained?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'You Statements',\n        value: true,\n        explanation:\n          \"The article contains multiple 'You' statements that directly address the reader. Examples include: 'Teachers check your work and give you feedback to help you improve', 'The school counselor is another leader who can help when you feel sad or worried', 'They can check if you have a fever or need a bandage', and 'Next time you see a school leader, remember how they help make your school day better!'\",\n        passed_review: null,\n        config: {\n          name: 'You Statements',\n          enabled: true,\n          prompt: 'article_you_statements',\n          human_prompt: 'Does the article contain any You statements?',\n          review_check: false,\n        },\n      },\n      {\n        name: 'Background Knowledge Relevance',\n        value: true,\n        explanation:\n          \"The article 'Who Are School Leaders?' stays focused on the topic throughout, providing relevant information about different types of school leaders (principals, teachers, counselors, nurses, and librarians) and their specific roles in the school environment. The content is appropriately tailored to what appears to be an elementary school audience, offering necessary background context about each leader's responsibilities in clear, simple language. The article considers what young readers may not know about these roles by explaining specific duties and how each leader contributes to the school community, without including extraneous information unrelated to school leadership.\",\n        passed_review: true,\n        config: {\n          name: 'Background Knowledge Relevance',\n          enabled: true,\n          prompt: 'article_background_knowledge',\n          human_prompt:\n            'Does the article include only relevant information and provide necessary background context?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Single Correct Answer',\n        value: true,\n        explanation:\n          \"Each comprehension question has only one correct answer that fits logically and grammatically in the blank. Question 1 requires 'principal' as the authority figure who enforces rules. Question 2 requires 'teacher' as the person who helps students learn in class. Question 3 requires 'school' as the place leaders work to improve. Question 4 requires 'fair' to describe how the principal treats everyone. Question 5 requires 'help' as the action counselors and nurses provide to students needing support. None of these answers are ambiguous or subjective within the context provided.\",\n        passed_review: true,\n        config: {\n          name: 'Single Correct Answer',\n          enabled: true,\n          prompt: 'article_single_correct_answer',\n          human_prompt: 'Does each comprehension question have only one correct answer?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Question & Answer Format',\n        value: true,\n        explanation:\n          'The comprehension questions follow the expected format. Each question contains a blank (______) where the missing word belongs. There are exactly 5 questions in total. The answers are provided in the correct order corresponding to each question (1-5). The questions appear to be related to school roles and responsibilities, with answers that logically complete each sentence.',\n        passed_review: true,\n        config: {\n          name: 'Question & Answer Format',\n          enabled: true,\n          prompt: 'article_question_answer_format',\n          human_prompt: 'Do the questions and answers follow the expected format?',\n          review_check: true,\n        },\n      },\n      {\n        name: 'Inferential Question',\n        value: true,\n        explanation:\n          \"Questions 1-4 are taken directly from the article text: Q1 comes from 'The principal makes sure everyone follows the rules'; Q2 from 'A teacher helps students learn new things every day in class'; Q3 from 'School leaders are people who help make our school a good place to learn'; Q4 from 'the principal helps make things fair for everyone'. Question 5 requires inference because nowhere does the article explicitly state that 'the counselor and nurse help students who need support' together. The reader must connect that both professionals provide different types of support (counselor helps with emotional needs, nurse with physical health) to infer they both 'help students who need support'.\",\n        passed_review: true,\n        config: {\n          name: 'Inferential Question',\n          enabled: true,\n          prompt: 'article_inferential_question',\n          human_prompt:\n            'Are Questions 1-4 taken directly from the article and is Question 5 inferential?',\n          review_check: true,\n        },\n      },\n    ],\n    evaluation_results: {\n      flesch_score: false,\n      num_words: true,\n      num_characters_question_1: true,\n      num_characters_question_2: true,\n      num_characters_question_3: true,\n      num_characters_question_4: true,\n      num_characters_question_5: true,\n      words_presence_percentage: true,\n      'Alignment with Objective': true,\n      'Alignment with Learning Goal': true,\n      'Comprehension Questions Accuracy': true,\n      'Answer Accuracy': true,\n      'Clarity & Directness': true,\n      'Bias & Objectivity': true,\n      'Paragraph Structure': true,\n      'Background Knowledge Relevance': true,\n      'Single Correct Answer': true,\n      'Question & Answer Format': true,\n      'Inferential Question': true,\n    },\n    passed_evaluation: false,\n  },\n  paragraphs_images: [\n    {\n      paragraph:\n        'School leaders are people who help make our school a good place to learn. They work hard every day to keep our school running smoothly and make sure everyone is learning and staying safe.',\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:ba0b6717-7c6e-446b-b4b9-63e0fd786e47/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:ba0b6717-7c6e-446b-b4b9-63e0fd786e47/prompt.json',\n      },\n    },\n    {\n      paragraph:\n        'The principal is an important school leader. The principal makes sure everyone follows the rules and stays safe. They visit each class to see how students are learning and talk with teachers about how to make lessons better. When there is a problem between students, the principal helps make things fair for everyone. They also lead school assemblies and special events.',\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:f4744d63-1a82-4ec3-a87e-76f5d6d7f3b0/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:f4744d63-1a82-4ec3-a87e-76f5d6d7f3b0/prompt.json',\n      },\n    },\n    {\n      paragraph:\n        'Teachers are also school leaders. A teacher helps students learn new things every day in class. They plan fun activities and make sure everyone understands the lessons. Teachers check your work and give you feedback to help you improve. They care about their students and want them to do their best. Teachers also talk to parents about how students are doing in school.',\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:5a78576f-6b9c-441d-84dc-d7b3d9c54e55/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:5a78576f-6b9c-441d-84dc-d7b3d9c54e55/prompt.json',\n      },\n    },\n    {\n      paragraph:\n        'The school counselor is another leader who can help when you feel sad or worried. They listen to students and give good advice. The counselor might visit your class to teach about feelings or how to be a good friend. They can also help students who need extra support with their schoolwork.',\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:3ada0ff5-faca-48cb-a6d8-064b64ada27e/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:3ada0ff5-faca-48cb-a6d8-064b64ada27e/prompt.json',\n      },\n    },\n    {\n      paragraph:\n        \"The school nurse is a leader who helps when students don't feel well. They can check if you have a fever or need a bandage. The nurse teaches students how to stay healthy too. They keep track of students' health records and call parents if a student gets sick at school.\",\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:9ac0695a-aca2-4e9b-8355-423c07a401fe/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:9ac0695a-aca2-4e9b-8355-423c07a401fe/prompt.json',\n      },\n    },\n    {\n      paragraph:\n        'The librarian helps students find books they will enjoy. They teach classes about how to find information and use computers. The librarian makes the library a fun place to visit.',\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:18571596-055f-4f6b-90cc-76fa2bc19696/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:18571596-055f-4f6b-90cc-76fa2bc19696/prompt.json',\n      },\n    },\n    {\n      paragraph:\n        'All school leaders work together as a team. They want to make sure school is a safe and happy place where everyone can learn. Next time you see a school leader, remember how they help make your school day better!',\n      image_data: {\n        image_s3_bucket: 'ai-ice-generation-dev',\n        image_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:1a921ef4-274b-4bfc-a40e-fcf7befa670a/image.png',\n        image_prompt_s3_path:\n          'generate/image/year=2025/month=05/day=20/arn:aws:states:us-east-1:373983736669:execution:ice-sfn-image-dev:1a921ef4-274b-4bfc-a40e-fcf7befa670a/prompt.json',\n      },\n    },\n  ],\n}","// AWS Signature V4 implementation for browser\nasync function sha256(message: string): Promise<ArrayBuffer> {\n  const msgBuffer = new TextEncoder().encode(message);\n  return await crypto.subtle.digest('SHA-256', msgBuffer);\n}\n\nfunction toHex(buffer: ArrayBuffer): string {\n  return Array.from(new Uint8Array(buffer))\n    .map(b => b.toString(16).padStart(2, '0'))\n    .join('');\n}\n\nasync function hmac(key: ArrayBuffer | string, message: string): Promise<ArrayBuffer> {\n  const keyBuffer = typeof key === 'string' ? new TextEncoder().encode(key) : key;\n  const cryptoKey = await crypto.subtle.importKey(\n    'raw',\n    keyBuffer,\n    { name: 'HMAC', hash: 'SHA-256' },\n    false,\n    ['sign']\n  );\n  const msgBuffer = new TextEncoder().encode(message);\n  return await crypto.subtle.sign('HMAC', cryptoKey, msgBuffer);\n}\n\nexport async function getS3Object(accessKeyId: string, secretAccessKey: string, s3Url: string) {\n  const url = new URL(s3Url);\n  const bucket = url.hostname.split('.')[0];\n  const key = url.pathname.slice(1); // Remove leading /\n  \n  const region = 'us-east-1';\n  const service = 's3';\n  const now = new Date();\n  const isoDate = now.toISOString().replace(/[:\\-]|\\.\\d{3}/g, '');\n  const dateStamp = isoDate.slice(0, 8);\n  \n  // Create canonical request\n  const method = 'GET';\n  const canonicalUri = `/${key}`;\n  const canonicalQuerystring = '';\n  const canonicalHeaders = `host:${url.hostname}\\nx-amz-date:${isoDate}\\n`;\n  const signedHeaders = 'host;x-amz-date';\n  const payloadHash = await sha256('');\n  \n  const canonicalRequest = [\n    method,\n    canonicalUri,\n    canonicalQuerystring,\n    canonicalHeaders,\n    signedHeaders,\n    toHex(payloadHash)\n  ].join('\\n');\n  \n  // Create string to sign\n  const algorithm = 'AWS4-HMAC-SHA256';\n  const credentialScope = `${dateStamp}/${region}/${service}/aws4_request`;\n  const stringToSign = [\n    algorithm,\n    isoDate,\n    credentialScope,\n    toHex(await sha256(canonicalRequest))\n  ].join('\\n');\n  \n  // Calculate signature\n  const kDate = await hmac(`AWS4${secretAccessKey}`, dateStamp);\n  const kRegion = await hmac(kDate, region);\n  const kService = await hmac(kRegion, service);\n  const kSigning = await hmac(kService, 'aws4_request');\n  const signature = toHex(await hmac(kSigning, stringToSign));\n  \n  // Create authorization header\n  const authorization = `${algorithm} Credential=${accessKeyId}/${credentialScope}, SignedHeaders=${signedHeaders}, Signature=${signature}`;\n  \n  // Make the request\n  const response = await fetch(s3Url, {\n    headers: {\n      'Authorization': authorization,\n      'x-amz-date': isoDate\n    }\n  });\n  \n  if (!response.ok) {\n    throw new Error(`S3 request failed: ${response.status} ${response.statusText}`);\n  }\n  \n  const text = await response.text();\n  return JSON.parse(text);\n}\n\nconst mock = {\n  article_text:\n    '{\"body\": \"A school has many people who work together. These people help to make school a good place to learn. They are called school leaders. Each leader has special jobs that keep the school running smoothly every day.\\\\n\\\\nThe principal is an important school leader. The principal makes sure the school is safe for everyone. They help teachers do their jobs well and solve big problems. When students have big problems, they can talk to the principal. Principals also make important rules for the school.\\\\n\\\\nTeachers are also school leaders. A teacher helps students learn new things in many subjects like reading and math. They make the class fun and exciting with interesting activities. Teachers help students when they don\\'t understand something and cheer for them when they do well.\\\\n\\\\nSome schools have a counselor. A counselor helps students who feel sad or mad about things at school or home. They teach students how to be good friends and solve problems with words. A counselor makes sure school is fair for everyone and that all students have what they need to learn.\\\\n\\\\nThe school nurse is another leader you might see. The nurse helps when students get hurt or feel sick during the school day. They check students\\' eyes and ears to make sure they can see and hear well. They teach students how to stay healthy by washing hands and eating good food too.\\\\n\\\\nStudents can be leaders too! Some students help their friends with hard work. Some keep the classroom clean by picking up trash and organizing books. Others make sure games at recess are fair for all kids by including everyone who wants to play.\\\\n\\\\nAll these leaders work together to make school a happy place. They help everyone learn and grow each day. Next time you are at school, look for all the leaders who help you every day!\", \"questions\": [{\"question\": \"A teacher helps students learn new things in _____.\", \"answer\": \"class\"}, {\"question\": \"School leaders work together to make ______ a good place to learn.\", \"answer\": \"school\"}, {\"question\": \"The counselor makes sure school is ______ for everyone.\", \"answer\": \"fair\"}, {\"question\": \"Some students ______ their friends with hard work.\", \"answer\": \"help\"}, {\"question\": \"Based on the article, school leaders probably want students to feel ______ at school.\", \"answer\": \"happy\"}]}',\n}\n","/** @jsx jsx */\nimport React, { useState, useRef, useEffect } from 'react';\nimport { jsx } from '@emotion/core';\nimport { Grid, Typography, CircularProgress, Button } from '@material-ui/core';\nimport GeneratorForm from './GeneratorForm';\nimport Preview from './Preview';\nimport { AiceApi } from './api/aiceApi';\nimport { getS3Object } from './api/resultBucketApi';\n\ninterface GeneratorPaneProps {\n  lessonData: Map<string, any>\n  clientId: string | null\n  clientSecret: string | null\n  awsAccessKeyId: string | null\n  awsSecretAccessKey: string | null\n}\n\nexport interface EngineParameters {\n  title: string\n  learningObjective: string\n  learningGoal: string\n  targetWordCount: number\n  vocabularyWords: string[]\n}\n\ninterface GeneratedContent {\n  body: string\n  questions: Array<{\n    question: string\n    answer: string\n  }>\n}\n\nexport default function GeneratorPane({ lessonData, clientId, clientSecret, awsAccessKeyId, awsSecretAccessKey }: GeneratorPaneProps) {\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationStatus, setGenerationStatus] = useState<string>('');\n  const [generatedContent, setGeneratedContent] = useState<GeneratedContent | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [currentGenerationId, setCurrentGenerationId] = useState<string | null>(null);\n  \n  const pollingIntervalRef = useRef<number | null>(null);\n  const apiRef = useRef<AiceApi | null>(null);\n\n  // Cleanup polling on unmount\n  useEffect(() => {\n    return () => {\n      if (pollingIntervalRef.current) {\n        clearInterval(pollingIntervalRef.current);\n      }\n    };\n  }, []);\n\n  const stopGeneration = () => {\n    if (pollingIntervalRef.current) {\n      clearInterval(pollingIntervalRef.current);\n      pollingIntervalRef.current = null;\n    }\n    setIsGenerating(false);\n    setGenerationStatus('Generation cancelled');\n    setCurrentGenerationId(null);\n  };\n\n  const startPolling = (api: AiceApi, generationId: string) => {\n    setCurrentGenerationId(generationId);\n    \n    const pollStatus = async () => {\n      try {\n        const status = await api.generationStatus(generationId);\n        setGenerationStatus(`Status: ${status.generation_status}`);\n        \n        if (status.generation_status === 'COMPLETED') {\n          if (pollingIntervalRef.current) {\n            clearInterval(pollingIntervalRef.current);\n            pollingIntervalRef.current = null;\n          }\n          \n          // Get generated content from S3\n          setGenerationStatus('Retrieving generated content...');\n          const result = await getS3Object(awsAccessKeyId!, awsSecretAccessKey!, status.output_location!);\n          const content = JSON.parse(result.article_text);\n          \n          setGeneratedContent(content);\n          setGenerationStatus('Generation completed successfully!');\n          setIsGenerating(false);\n          setCurrentGenerationId(null);\n          \n        } else if (status.generation_status === 'FAILED') {\n          if (pollingIntervalRef.current) {\n            clearInterval(pollingIntervalRef.current);\n            pollingIntervalRef.current = null;\n          }\n          throw new Error('Generation failed');\n        }\n      } catch (err) {\n        if (pollingIntervalRef.current) {\n          clearInterval(pollingIntervalRef.current);\n          pollingIntervalRef.current = null;\n        }\n        const errorMessage = err instanceof Error ? err.message : 'Status check failed';\n        setError(errorMessage);\n        setGenerationStatus('');\n        setIsGenerating(false);\n        setCurrentGenerationId(null);\n      }\n    };\n\n    // Start polling immediately, then every 10 seconds\n    pollStatus();\n    pollingIntervalRef.current = window.setInterval(pollStatus, 10000);\n  };\n\n  const onGenerate = async (parameters: EngineParameters) => {\n    if (!clientId || !clientSecret || !awsAccessKeyId || !awsSecretAccessKey) {\n      setError('Missing credentials');\n      return;\n    }\n\n    setIsGenerating(true);\n    setError(null);\n    setGeneratedContent(null);\n    setGenerationStatus('Starting generation...');\n\n    try {\n      const api = new AiceApi(clientId, clientSecret);\n      apiRef.current = api;\n      \n      // Start generation\n      setGenerationStatus('Submitting generation request...');\n      const response = await api.generateArticle(\n        parameters.title,\n        parameters.learningObjective,\n        parameters.learningGoal,\n        parameters.targetWordCount,\n        parameters.vocabularyWords\n      );\n\n      // Start polling for completion\n      setGenerationStatus('Generation in progress...');\n      startPolling(api, response.generation_id);\n      \n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Generation failed';\n      setError(errorMessage);\n      setGenerationStatus('');\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <Grid container css={{ height: '100%' }}>\n      <Grid item xs={12} lg={6}>\n        <GeneratorForm \n          lessonData={lessonData} \n          disabled={!clientId || !clientSecret || !awsAccessKeyId || !awsSecretAccessKey || isGenerating} \n          onGenerate={onGenerate} \n        />\n      </Grid>\n      <Grid item xs={12} lg={6}>\n        <div css={{ padding: 24, height: '100%' }}>\n          {isGenerating && (\n            <div css={{ textAlign: 'center', padding: 20 }}>\n              <CircularProgress css={{ marginBottom: 16 }} />\n              <Typography variant=\"body2\" color=\"textSecondary\" css={{ marginBottom: 16 }}>\n                {generationStatus}\n              </Typography>\n              <Button variant=\"outlined\" onClick={stopGeneration} size=\"small\">\n                Cancel Generation\n              </Button>\n            </div>\n          )}\n          \n          {error && (\n            <div css={{ padding: 20, backgroundColor: '#ffebee', borderRadius: 4 }}>\n              <Typography variant=\"body2\" color=\"error\">\n                Error: {error}\n              </Typography>\n            </div>\n          )}\n          \n          {generatedContent && !isGenerating && (\n            <Preview content={generatedContent} />\n          )}\n          \n          {!isGenerating && !generatedContent && !error && (\n            <div css={{ \n              display: 'flex', \n              alignItems: 'center', \n              justifyContent: 'center', \n              height: '100%',\n              color: '#666',\n              textAlign: 'center'\n            }}>\n              <Typography variant=\"body2\">\n                Fill out the form and click \"Generate Content\" to create your lesson\n              </Typography>\n            </div>\n          )}\n        </div>\n      </Grid>\n    </Grid>\n  )\n}","/** @jsx jsx */\nimport React, { useState } from 'react';\nimport { jsx } from '@emotion/core';\nimport { Builder } from '@builder.io/sdk';\nimport { Grid, Typography, Button, Dialog, DialogTitle, DialogContent, DialogActions, TextField } from '@material-ui/core';\nimport GeneratorPane from './GeneratorPane';\nimport { ApplicationContext } from './interfaces/application-context';\n\n\nexport default function AiGenerator({context}: {context: ApplicationContext}) {\n  console.log('context', context)\n  const organisation = context.user.organization\n  const settings = organisation.value.settings.plugins\n\n  const [clientId, setClientId] = useState<string | null>(settings.get('aiClientId'));\n  const [clientSecret, setClientSecret] = useState<string | null>(settings.get('aiClientSecret'));\n  const [awsAccessKeyId, setAwsAccessKeyId] = useState<string | null>(settings.get('aiAwsAccessKeyId'));\n  const [awsSecretAccessKey, setAwsSecretAccessKey] = useState<string | null>(settings.get('aiAwsSecretAccessKey'));\n  const [modalOpen, setModalOpen] = useState(false);\n  const [formData, setFormData] = useState({\n    clientId: clientId || '',\n    clientSecret: clientSecret || '',\n    awsAccessKeyId: awsAccessKeyId || '',\n    awsSecretAccessKey: awsSecretAccessKey || ''\n  });\n\n  \n  \n  //const organisation = context.user.organization;\n  const type = context.designerState?.editingModel?.name\n\n  if (type !== 'lesson') {\n    return <div css={{ padding: 16, height: '100vh' }}>\n      <Typography variant=\"h4\" css={{ marginBottom: 16 }}>\n        Sorry, AI Generator is currently only available for lessons\n      </Typography>\n    </div>\n  }\n\n  const lessonData = context.designerState?.editingContentModel?.data;\n  if (!lessonData) {\n    return <div css={{ padding: 16, height: '100vh' }}>\n      <Typography variant=\"h4\" css={{ marginBottom: 16 }}>\n        No lesson data found\n      </Typography>\n    </div>\n  }\n\n  const requiresCredentials = !(clientId && clientSecret && awsAccessKeyId && awsSecretAccessKey)\n\n  const handleSaveCredentials = () => {\n    setClientId(formData.clientId);\n    setClientSecret(formData.clientSecret);\n    setAwsAccessKeyId(formData.awsAccessKeyId);\n    setAwsSecretAccessKey(formData.awsSecretAccessKey);\n    \n    settings.set('aiClientId', formData.clientId);\n    settings.set('aiClientSecret', formData.clientSecret);\n    settings.set('aiAwsAccessKeyId', formData.awsAccessKeyId);\n    settings.set('aiAwsSecretAccessKey', formData.awsSecretAccessKey);\n    organisation.save()\n    \n    setModalOpen(false);\n  };\n\n  const model = lessonData.get('name')\n  \n  return (\n    <div css={{ padding: 16, height: '100vh' }}>\n      <div css={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 }}>\n        <Typography variant=\"h4\">\n          Use AICE to generate lesson resources for {model}\n        </Typography>\n        <Button variant=\"outlined\" onClick={() => setModalOpen(true)}>\n          Set Credentials\n        </Button>\n      </div>\n      {!requiresCredentials && <GeneratorPane lessonData={lessonData} clientId={clientId} clientSecret={clientSecret} awsAccessKeyId={awsAccessKeyId} awsSecretAccessKey={awsSecretAccessKey} />}\n      \n      <Dialog open={modalOpen} onClose={() => setModalOpen(false)} maxWidth=\"sm\" fullWidth>\n        <DialogTitle>Set AI Credentials</DialogTitle>\n        <DialogContent css={{ paddingTop: 20 }}>\n          <div css={{ marginBottom: 16 }}>\n            <TextField\n              autoFocus\n              label=\"Client ID\"\n              fullWidth\n              variant=\"outlined\"\n              value={formData.clientId}\n              onChange={(e) => setFormData({...formData, clientId: e.target.value})}\n            />\n          </div>\n          <div css={{ marginBottom: 16 }}>\n            <TextField\n              label=\"Client Secret\"\n              type=\"password\"\n              fullWidth\n              variant=\"outlined\"\n              value={formData.clientSecret}\n              onChange={(e) => setFormData({...formData, clientSecret: e.target.value})}\n            />\n          </div>\n          <div css={{ marginBottom: 16 }}>\n            <TextField\n              label=\"AWS Access Key ID\"\n              fullWidth\n              variant=\"outlined\"\n              value={formData.awsAccessKeyId}\n              onChange={(e) => setFormData({...formData, awsAccessKeyId: e.target.value})}\n            />\n          </div>\n          <div css={{ marginBottom: 16 }}>\n            <TextField\n              label=\"AWS Secret Access Key\"\n              type=\"password\"\n              fullWidth\n              variant=\"outlined\"\n              value={formData.awsSecretAccessKey}\n              onChange={(e) => setFormData({...formData, awsSecretAccessKey: e.target.value})}\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setModalOpen(false)}>Cancel</Button>\n          <Button onClick={handleSaveCredentials} color=\"primary\">Save</Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  )\n}\n\nBuilder.register('editor.mainTab', {\n  name: ' AI Generator',\n  component: AiGenerator,\n});\n"],"names":[],"mappings":"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"}